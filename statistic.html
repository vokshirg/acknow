<!DOCTYPE html>
<html lang="ru">
    <head>        
        <!-- META SECTION -->
        <title>Инвейдерс Знания - Наш новый Template</title>            
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        
        <link rel="icon" href="favicon.ico" type="image/x-icon" />
        <!-- END META SECTION -->

        <!-- LESSCSS INCLUDE -->   
        <link rel="stylesheet/less" type="text/css" href="css/styles.less"/>
        <script type="text/javascript" src="js/plugins/lesscss/less.min.js"></script>                
        <!-- EOF LESSCSS INCLUDE -->   
    </head>

    <style>

    #tab22 path {
      stroke: #fff;
      fill-rule: evenodd;
    }

    </style>
    <body>
        <!-- START PAGE CONTAINER -->
        <div class="page-container page-container-wide page-navigation-toggled page-navigation-toggled-hover page-navigation-top-fixed">

            <!-- START PAGE SIDEBAR -->
            <div class="page-sidebar page-sidebar-fixed scroll">
                <!-- START X-NAVIGATION -->
                <ul class="x-navigation x-navigation-minimized x-navigation-custom ">
                    <li class="xn-logo">
                        <a href="#">Инвейдерс Знания</a>
                        <a href="#" class="x-navigation-control"></a>
                    </li>
                    <li class="xn-button article-new">
                        <a href="article-new.html" class="btn btn-lg btn-block btn-danger">
                            <span class="fa fa-edit"></span>
                            <span class="xn-text"> Создать статью</span>
                        </a>
                    </li>
                    <li>
                        <a href="index.html">
                            <i class="fa fa-desktop"></i>
                            <span class="xn-text">Главная</span>
                        </a>
                    </li>
                    <li>
                        <a href="articles.html">
                            <i class="fa fa fa-file-text-o"></i>
                            <span class="xn-text">Статьи</span>
                        </a>
                    </li>
                    <li>
                        <a href="files.html">
                            <i class="fa fa-files-o"></i>
                            <span class="xn-text">Файлы</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-book"></i>
                            <span class="xn-text">Словарь</span>
                        </a>
                    </li>
                    <li>
                        <a href="users.html">
                            <i class="fa fa-users"></i>
                            <span class="xn-text">Пользователи</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-newspaper-o"></i>
                            <span class="xn-text">Новости</span>
                        </a>
                    </li>
                    <li class="active">
                        <a href="statistic.html">
                            <i class="fa fa-bar-chart-o"></i>
                            <span class="xn-text">Статистика</span>
                        </a>
                    </li>
                </ul>
                <!-- END X-NAVIGATION -->
            </div>
            <!-- END PAGE SIDEBAR -->
            
            <!-- PAGE CONTENT -->
            <div class="page-content">

    
                <!-- NAVIGATION -->
                <ul class="x-navigation x-navigation-horizontal x-navigation-panel">
                   
                    <!-- TOGGLE NAVIGATION -->
                    <li class="xn-icon-button hidden">
                        <a href="#" class="x-navigation-minimize"><span class="fa fa-dedent"></span></a>
                    </li><!-- END TOGGLE NAVIGATION -->
                   
                    <!-- SEARCH -->
                    <li class="xn-search">
                        <form role="form">
                            <input type="text" name="search" placeholder="Поиск...">
                        </form>
                    </li><!-- END SEARCH -->                  
                    
                    <!-- POWER OFF -->
                    <li class="xn-icon-button pull-right last">
                        <a href="#"><span class="fa fa-power-off"></span></a>
                        <ul class="xn-drop-left animated zoomIn">
                            <li><a href="pages-lock-screen.html"><span class="fa fa-lock"></span> Экран блокировки</a></li>
                            <li><a href="#" class="mb-control" data-box="#mb-signout"><span class="fa fa-sign-out"></span> Выйти</a></li>
                        </ul>                        
                    </li><!-- END POWER OFF -->
                    
                    <!-- USER --
                    <li class="xn-icon-button pull-right">
                        <a href="#"><span class="fa fa-user"></span></a>                      
                    </li>
                    <!-- USER -->
                    <li class="xn-profile pull-right">
                        <a href="profile.html" class="profile-mini">
                            <img src="assets/images/users/avatar.jpg" alt="John Doe" class="mCS_img_loaded">
                        </a>
                    </li>
                    <!-- END USER --> 

                    <!-- NOTIFICATIONS -->
                    <li class="xn-icon-button pull-right">
                        <a href="#"><i class="fa fa-bell-o"></i></a>
                        <div class="informer informer-danger">4</div>
                        <div class="panel panel-primary animated zoomIn xn-drop-left xn-panel-dragging notifications">
                            <div class="panel-heading">
                                <h3 class="panel-title"><i class="fa fa-bell"></i> Уведомления</h3>                                
                                <div class="pull-right">
                                    <span class="label label-danger">4 новых</span>
                                </div>
                            </div>
                            <div class="panel-body list-group list-group-contacts scroll" style="height: 200px;">
                                <span href="#" class="list-group-item">
                                    <button class="btn btn-news btn-primary"><span class="fa fa-user"></span></button>
                                    <span class="contacts-title">Изменение статуса статьи</span>
                                    <p>Статья <a href="http://demo.kcs.guru/articles/19">Знания компании — используйте с умом</a> была опубликована пользователем <a href="http://demo.kcs.guru/users/3">Ольга </a></p>
                                    <a href="#" class="notification-check"><span class="fa fa-check"></span></a>
                                    <!-- <button type="button" class="btn btn-xs btn-success  btn-rounded"><span class="fa fa-check"></span></button> -->
                                </span>
                                <span href="#" class="list-group-item">
                                    <button class="btn btn-news btn-primary"><span class="fa fa-user"></span></button>
                                    <span class="contacts-title">Изменение статуса статьи</span>
                                    <p>Статья <a href="http://demo.kcs.guru/users/3">Ольга </a></p>
                                    <a href="#" class="notification-check"><span class="fa fa-check"></span></a>
                                    <!-- <button type="button" class="btn btn-xs btn-success  btn-rounded"><span class="fa fa-check"></span></button> -->
                                </span>
                                <span href="#" class="list-group-item">
                                    <button class="btn btn-news btn-primary"><span class="fa fa-user"></span></button>
                                    <span class="contacts-title">Изменение статуса статьи</span>
                                    <p>Статья <a href="http://demo.kcs.guru/articles/19">Знания компании — используйте с умом</a> была опубликована пользователем <a href="http://demo.kcs.guru/users/3">Ольга </a></p>
                                    <a href="#" class="notification-check"><span class="fa fa-check"></span></a>
                                    <!-- <button type="button" class="btn btn-xs btn-success  btn-rounded"><span class="fa fa-check"></span></button> -->
                                </span>
                                <span href="#" class="list-group-item">
                                    <button class="btn btn-news btn-primary"><span class="fa fa-user"></span></button>
                                    <span class="contacts-title">Изменение статуса статьи</span>
                                    <p>Статья <a href="http://demo.kcs.guru/articles/19">Знания компании — используйте с умом</a> была опубликована пользователем <a href="http://demo.kcs.guru/users/3">Ольга </a></p>
                                    <a href="#" class="notification-check"><span class="fa fa-check"></span></a>
                                    <!-- <button type="button" class="btn btn-xs btn-success  btn-rounded"><span class="fa fa-check"></span></button> -->
                                </span>

                            </div>  
                            <div class="panel-footer text-center">
                                <a href="pages-messages.html">Показать все уведомления</a>
                            </div>                            
                        </div>                        
                    </li><!-- END NOTIFICATIONS -->

                    <!-- SETTINGS -->
                    <li class="xn-icon-button pull-right">
                        <a href="#"><span class="fa fa-cogs"></span></a>
                        <ul class="xn-drop-left animated zoomIn">
                            <li>
                                <a href="#"><span class="fa fa-language"></span> Язык</a>
                                <ul class="xn-drop-left xn-drop-white animated zoomIn">
                                    <li><a href="#"><span class="flag flag-ru"></span> Русский</a></li>
                                    <li><a href="#"><span class="flag flag-gb"></span> English</a></li>
                                    <li><a href="#"><span class="flag flag-cn"></span> Chinese</a></li>
                                </ul>
                            </li>
                            <li><a href="pages-lock-screen.html"><span class="fa fa-lock"></span> Заблокировать экран</a></li>
                            <li><a href="#" class="mb-control" data-box="#mb-signout"><span class="fa fa-sign-out"></span> Выйти</a></li>

                        </ul>                        
                    </li><!-- END SETTINGS -->  
                
                </ul><!-- EOF NAVIGATION -->



                <!-- START BREADCRUMB -->
                <ul class="breadcrumb">
                    <!-- <li><a href="#">Статистика</a></li>                     -->
                    <li class="active">Статистика</li>
                </ul><!-- END BREADCRUMB -->  

                <div class="page-title">                    
                    <h2><span class="fa fa-bar-chart-o"></span> Статистика</h2>
                </div>  

                
                <!-- PAGE CONTENT WRAPPER -->
                <div class="page-content-wrap">
                
                    <div class="row">
                        <div class="col-md-12">

                            <!-- START VERTICAL TABS -->
                            <div class="panel panel-default tabs nav-tabs-vertical push-up-0">                   
                                <ul class="nav nav-tabs">
                                    <li class="active"><a href="#tab22" data-toggle="tab">Кластеризация знаний</a></li>
                                    <li><a href="#tab23" data-toggle="tab">Динамика создания и публикации статей</a></li>
                                    <li><a href="#tab24" data-toggle="tab">Поисковая Аналитика</a></li>
                                    <li><a href="#tab25" data-toggle="tab">Тренды развития областей знаний</a></li>
                                </ul>                    
                                <div class="panel-body tab-content" style="min-width: 85%;">
                                    <div class="tab-pane active" id="tab22">
                                        <div id="explanation">Защита интеллектуальной собственности</div>

                                        <form>
                                         Размер делений:<br>
                                          <label><input type="radio" name="mode" value="size"> По объему данных</label><br>
                                          <label><input type="radio" name="mode" value="count" checked> По количеству</label>
                                        </form>

                                    </div>


                                    <div class="tab-pane" id="tab23">
                                        
                                    </div>


                                    <div class="tab-pane" id="tab24">
                                        <div class="table-responsive search-anal">
                                            <table class="table datatable" data-order='[[ 1, "desc" ]]'>
                                                <thead>
                                                    <tr>
                                                      <th>Текст запроса</th>
                                                      <th>Количество запросов</th>
                                                      <th>Количество успешных запросов</th>
                                                      <th>Конверсия</th>
                                                      <th>Среднее количество результатов по запросу</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="danger">
                                                      <td>Не работает принтер</td>
                                                      <td>136</td>
                                                      <td>1</td>
                                                      <td>0%</td>
                                                      <td>38</td>
                                                    </tr>
                                                    <tr class="danger">
                                                      <td>Согласование заявок</td>
                                                      <td>106</td>
                                                      <td>0</td>
                                                      <td>0%</td>
                                                      <td>0</td>
                                                    </tr>
                                                    <tr class="warning">
                                                      <td>Как запустить приложение</td>
                                                      <td>75</td>
                                                      <td>30</td>
                                                      <td>40%</td>
                                                      <td>1</td>
                                                    </tr>
                                                    <tr>
                                                      <td>Синий экран windows</td>
                                                      <td>54</td>
                                                      <td>45</td>
                                                      <td>83%</td>
                                                      <td>10</td>
                                                    </tr>
                                                    <tr>
                                                      <td>Настройка автозапуска</td>
                                                      <td>27</td>
                                                      <td>20</td>
                                                      <td>74%</td>
                                                      <td>2</td>
                                                    </tr>
                                                    <tr>
                                                      <td>Восстановление данных</td>
                                                      <td>25</td>
                                                      <td>22</td>
                                                      <td>88%</td>
                                                      <td>12</td>
                                                    </tr>
                                                    <tr>
                                                      <td>Регламенты описания проектной документации</td>
                                                      <td>22</td>
                                                      <td>17</td>
                                                      <td>77%</td>
                                                      <td>1</td>
                                                    </tr>
                                                    
                                                    
                                                </tbody>
                                              </table>
                                          </div>
                                    </div>  


                                    <div class="tab-pane" id="tab25">
                                        
                                    </div>

                                                          
                                </div>
                            </div>                        
                            <!-- END VERTICAL TABS -->

                        </div>
                    </div>
                
                </div>
                <!-- END PAGE CONTENT WRAPPER -->                
            </div>            
            <!-- END PAGE CONTENT -->
        </div>
        <!-- END PAGE CONTAINER -->

        <!-- MESSAGE BOX-->
        <div class="message-box animated fadeIn" data-sound="alert" id="mb-signout">
            <div class="mb-container">
                <div class="mb-middle">
                    <div class="mb-title"><span class="fa fa-sign-out"></span> Выход</div>
                    <div class="mb-content">
                        <p>Вы уверены что хотите выйти?</p>                    
                        <p>Нажмите Нет если вы хотите продолжить работу. Нажмите Да если вы хотите выйти из текущего профиля.</p>
                    </div>
                    <div class="mb-footer">
                        <div class="pull-right">
                            <a href="login.html" class="btn btn-success btn-lg">Да</a>
                            <button class="btn btn-default btn-lg mb-control-close">Нет</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MESSAGE BOX-->

        <!-- START PRELOADS -->
        <audio id="audio-alert" src="audio/alert.mp3" preload="auto"></audio>
        <audio id="audio-fail" src="audio/fail.mp3" preload="auto"></audio>
        <!-- END PRELOADS -->                 
        
    <!-- START SCRIPTS -->
        <!-- START PLUGINS -->
        <script type="text/javascript" src="js/plugins/jquery/jquery.min.js"></script>
        <script type="text/javascript" src="js/plugins/jquery/jquery-ui.min.js"></script>
        <script type="text/javascript" src="js/plugins/bootstrap/bootstrap.min.js"></script>        
        <script type="text/javascript" src="js/plugins/mcustomscrollbar/jquery.mCustomScrollbar.min.js"></script>
        <!-- END PLUGINS -->

        <!-- THIS PAGE PLUGINS -->
        <script type='text/javascript' src='js/plugins/icheck/icheck.min.js'></script>
        <script type="text/javascript" src="js/plugins/datatables/jquery.dataTables.min.js"></script>

        <!-- END PAGE PLUGINS -->         

        <!-- START TEMPLATE -->
        <script type="text/javascript" src="js/plugins.js"></script>        
        <script type="text/javascript" src="js/actions.js"></script>        
        <!-- END TEMPLATE -->
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script>

        var width = 960,
            height = 700,
            radius = Math.min(width, height) / 2;

        var x = d3.scale.linear()
            .range([0, 2 * Math.PI]);

        var y = d3.scale.sqrt()
            .range([0, radius]);

        var color = d3.scale.category20c();

        var svg = d3.select("#tab22").append("svg")
            .attr("width", width)
            .attr("height", height)
          .append("g")
            .attr("transform", "translate(" + width / 2 + "," + (height / 2 + 10) + ")");

        var partition = d3.layout.partition()
            .sort(null)
            .value(function(d) { return 1; });

        var arc = d3.svg.arc()
            .startAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x))); })
            .endAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx))); })
            .innerRadius(function(d) { return Math.max(0, y(d.y)); })
            .outerRadius(function(d) { return Math.max(0, y(d.y + d.dy)); });

        // Keep track of the node that is currently being displayed as the root.
        var node;

        d3.json("js/stat.json", function(error, root) {
          node = root;
          var path = svg.datum(root).selectAll("path")
              .data(partition.nodes)
            .enter().append("path")
              .attr("d", arc)
              .style("fill", function(d) { return color((d.children ? d : d.parent).name); })
              .style("opacity", 1)
              .on("click", click)
              .on("mouseover", hover)
              // .on("mouseleave", mouseleave)
              // .on("mouseleave", function(d) {d3.selectAll("path").on("mouseover", null);})
              .each(stash);

          // Add the mouseleave handler to the bounding circle.
          d3.select("#tab22").on("mouseleave", mouseleave);

          d3.selectAll("input").on("change", function change() {
            var value = this.value === "count"
                ? function() { return 1; }
                : function(d) { return d.size; };

            path
                .data(partition.value(value).nodes)
              .transition()
                .duration(1000)
                .attrTween("d", arcTweenData);
          });

          // Given a node in a partition layout, return an array of all of its ancestor
            // nodes, highest first, but excluding the root.
            function getAncestors(node) {
              var path = [];
              var current = node;
              while (current.parent) {
                path.unshift(current);
                current = current.parent;
              }
              // console.log(path);

              return path;
            }

            function firstparent(node) {
              var path = [];
              var current = node;
              while (current.parent) {
                path.unshift(current);
                current = current.parent;
              }
              // console.log(path);

              return current;
            }

          function click(d) {
            node = d;
            path.transition()
              .duration(1000)
              .attrTween("d", arcTweenZoom(node));
            // d3.select("#explanation")
            //   .text(node.name);
              
          }
          function hover(d) {
                node = d;
                // d3.select("#explanation")
                d3.select("#explanation")
                  .text(node.name);

                  var sequenceArray = getAncestors(node);
                  // updateBreadcrumbs(sequenceArray, percentageString);

                  // Fade all the segments.
                  d3.selectAll("path")
                      .style("opacity", 1);

                  // Then highlight only those that are an ancestor of the current segment.
                  svg.selectAll("path")
                      .filter(function(node) {
                                return (sequenceArray.indexOf(node) >= 0);
                              })
                      .style("opacity", .4);
                }

        function mouseleave(d) {

          // Deactivate all segments during transition.
          d3.selectAll("path").on("mouseover", null);

          // Transition each segment to full opacity and then reactivate it.
          d3.selectAll("path")
              .transition()
              .duration(1000)
              .style("opacity", 1)
              .each("end", function() {
                d3.select(this).on("mouseover", hover);
              });
        }

        });





        d3.select(self.frameElement).style("height", height + "px");

        // Setup for switching data: stash the old values for transition.
        function stash(d) {
          d.x0 = d.x;
          d.dx0 = d.dx;
        }

        // When switching data: interpolate the arcs in data space.
        function arcTweenData(a, i) {
          var oi = d3.interpolate({x: a.x0, dx: a.dx0}, a);
          function tween(t) {
            var b = oi(t);
            a.x0 = b.x;
            a.dx0 = b.dx;
            return arc(b);
          }
          if (i == 0) {
           // If we are on the first arc, adjust the x domain to match the root node
           // at the current zoom level. (We only need to do this once.)
            var xd = d3.interpolate(x.domain(), [node.x, node.x + node.dx]);
            return function(t) {
              x.domain(xd(t));
              return tween(t);
            };
          } else {
            return tween;
          }
        }

        // When zooming: interpolate the scales.
        function arcTweenZoom(d) {
          var xd = d3.interpolate(x.domain(), [d.x, d.x + d.dx]),
              yd = d3.interpolate(y.domain(), [d.y, 1]),
              yr = d3.interpolate(y.range(), [d.y ? 20 : 0, radius]);
          return function(d, i) {
            return i
                ? function(t) { return arc(d); }
                : function(t) { x.domain(xd(t)); y.domain(yd(t)).range(yr(t)); return arc(d); };
          };
        }

        </script>

        <script src="http://code.highcharts.com/highcharts.js"></script>
        <script src="http://code.highcharts.com/modules/exporting.js"></script>

        <script>
            $(function () {
                $('#tab23').highcharts({
                     chart: {
                        width: '800',
                        height: 400
                    },
                    title: {
                        text: ''
                    },
                    xAxis: {
                        categories: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май']
                    },

                    series: [{
                        type: 'column',
                        name: 'Черновики',
                        color: Highcharts.getOptions().colors[1],
                        data: [3, 14, 11, 3, 4]
                    }, {
                        type: 'column',
                        color: Highcharts.getOptions().colors[2],
                        name: 'Одобрено',
                        data: [1, 6, 3, 9, 11]
                    }, {
                        type: 'column',
                        name: 'Опубликованно',
                        color: Highcharts.getOptions().colors[0],

                        data: [2, 3, 5, 7, 6]
                    }, {
                        type: 'spline',
                        name: 'Всего черновиков',
                        color: Highcharts.getOptions().colors[1],
                        data: [3, 17, 25, 19, 13],
                        marker: {
                            lineWidth: 2,
                            lineColor: Highcharts.getOptions().colors[1],
                            fillColor: 'white'
                        }
                    }, {
                        type: 'spline',
                        color: Highcharts.getOptions().colors[2],
                        name: 'Всего одобрено',
                        data: [1, 7, 10, 19, 30],
                        marker: {
                            lineWidth: 2,
                            lineColor: Highcharts.getOptions().colors[2],
                            fillColor: 'white'
                        }
                    }, {
                        type: 'spline',
                        color: Highcharts.getOptions().colors[0],
                        name: 'Всего опубликованных',
                        data: [2, 5, 10, 17, 23],
                        marker: {
                            lineWidth: 2,
                            lineColor: Highcharts.getOptions().colors[0],
                            fillColor: 'white'
                        }
                    }, {
                        type: 'spline',
                        color: Highcharts.getOptions().colors[5],
                        name: 'Всего статей',
                        data: [6, 29, 45, 55, 66],
                        marker: {
                            lineWidth: 2,
                            lineColor: Highcharts.getOptions().colors[5],
                            fillColor: 'white'
                        }
                    }]
                });
            });

        </script>

        <script>
            $(function() {
              $('#tab25').highcharts({
                  chart: {
                    width: '800',
                    height: 400
                  },
                  title: {
                    text: 'Тренды развития областей знаний'
                  },
                  xAxis: {
                    categories: ['2005', '2010', '2015', '2020', '2025']
                  },
                  yAxis: [{ // Primary yAxis
                      labels: {
                        format: '{value}%',
                        style: {
                          color: Highcharts.getOptions().colors[1]
                        }
                      },
                      title: {
                        text: '',
                        style: {
                          color: Highcharts.getOptions().colors[1]
                        }
                      }
                    }],

                    series: [{
                      type: 'spline',
                      name: 'Big-Data',
                      color: Highcharts.getOptions().colors[4],
                      data: [3, 95, 57, 36, 35],
                      marker: {
                        lineWidth: 2,
                        lineColor: Highcharts.getOptions().colors[4],
                        fillColor: 'white'
                      }
                    }, {
                      type: 'spline',
                      color: Highcharts.getOptions().colors[3],
                      name: 'Интернет-вещи',
                      data: [1, 25, 45, 75, 23],
                      marker: {
                        lineWidth: 2,
                        lineColor: Highcharts.getOptions().colors[3],
                        fillColor: 'white'
                      }
                    }, {
                      type: 'spline',
                      color: Highcharts.getOptions().colors[6],
                      name: 'Солнечная энергетика',
                      data: [0, 3, 6, 23, 82],
                      marker: {
                        lineWidth: 2,
                        lineColor: Highcharts.getOptions().colors[6],
                        fillColor: 'white'
                      }
                    }, {
                      type: 'spline',
                      color: Highcharts.getOptions().colors[2],
                      name: 'Умный дом',
                      data: [0, 13, 27, 44, 66],
                      marker: {
                        lineWidth: 2,
                        lineColor: Highcharts.getOptions().colors[2],
                        fillColor: 'white'
                      }
                    }, {
                      type: 'spline',
                      color: Highcharts.getOptions().colors[8],
                      name: '3D - printing',
                      data: [16, 49, 51, 52, 55],
                      marker: {
                        lineWidth: 2,
                        lineColor: Highcharts.getOptions().colors[8],
                        fillColor: 'white'
                      }
                    }]
                  });
              });

        </script>

    <!-- END SCRIPTS -->         
    </body>
</html>